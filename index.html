<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Frise chronologique – Arts plastiques</title>

<style>
body {
  font-family: Arial, sans-serif;
  padding: 30px;
}

#controls {
  margin-bottom: 20px;
}

#timeline {
  position: relative;
  height: 200px;
  border-top: 4px solid black;
  margin-top: 60px;
}

.event {
  position: absolute;
  top: -90px;
  text-align: center;
  cursor: pointer;
}

.event img {
  width: 80px;
  border: 1px solid black;
}

/* POPUP */
#popup {
  display: none;
  position: fixed;
  inset: 50% auto auto 50%;
  transform: translate(-50%, -50%);
  background: white;
  border: 2px solid black;
  padding: 20px;
  width: 300px;
  z-index: 10;
}

#popup img {
  width: 100%;
}

#overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  z-index: 5;
}

.close {
  text-align: right;
  cursor: pointer;
}
</style>
</head>

<body>

<h1>Frise chronologique – Histoire des Arts</h1>

<div id="controls">
  <input type="number" id="year" placeholder="Année">
  <input type="text" id="title" placeholder="Titre de l’œuvre">
  <input type="text" id="artist" placeholder="Artiste">
  <input type="file" id="image">
  <button onclick="addEvent()">Ajouter l’œuvre</button>
</div>

<div id="timeline"></div>

<div id="overlay"></div>

<div id="popup">
  <div class="close" onclick="closePopup()">✖</div>
  <img id="popupImg">
  <p id="popupYear"></p>
  <p id="popupTitle"></p>
  <p id="popupArtist"></p>
</div>

<script>
const startYear = -2000;
const endYear = 2026;

let events = JSON.parse(localStorage.getItem("events")) || [];

const timeline = document.getElementById("timeline");

function save() {
  localStorage.setItem("events", JSON.stringify(events));
}

function render() {
  timeline.innerHTML = "";
  const width = timeline.offsetWidth;

  events.forEach((e, index) => {
    const x = ((e.year - startYear) / (endYear - startYear)) * width;

    const div = document.createElement("div");
    div.className = "event";
    div.style.left = `${x}px`;

    div.innerHTML = `<img src="${e.image}"><br>${e.year}`;

    div.onclick = () => openPopup(e);

    timeline.appendChild(div);
  });
}

function addEvent() {
  const year = document.getElementById("year").value;
  const title = document.getElementById("title").value;
  const artist = document.getElementById("artist").value;
  const file = document.getElementById("image").files[0];

  if (!year || !file) return alert("Année et image obligatoires");

  const reader = new FileReader();
  reader.onload = () => {
    events.push({
      year: Number(year),
      title,
      artist,
      image: reader.result
    });
    save();
    render();
  };
  reader.readAsDataURL(file);
}

function openPopup(e) {
  popupImg.src = e.image;
  popupYear.textContent = e.year;
  popupTitle.textContent = e.title;
  popupArtist.textContent = e.artist;
  popup.style.display = "block";
  overlay.style.display = "block";
}

function closePopup() {
  popup.style.display = "none";
  overlay.style.display = "none";
}

overlay.onclick = closePopup;

render();
</script>

</body>
</html>
